---
title: "Supplementary Materials"
subtitle: "Local and Regional Disturbance Around Urban Stormwater Ponds Determines their use as Butterfly Habitat"
author: "Jesse D. Fortier*, Isabella C. Richmond, Mary Ann C. Perron, Frances Pick, and Heather Kharouba"
format: 
  html:
    embed-resources: true
---

```{r}
#| echo: false
#| eval: true
#| message: false
#| warning: false
#| include: false
#| label: setup


source('script/0-Packages.R')

plant <- read.csv('output/PlantCleanbySite.csv') %>% 
  mutate(Pond = str_remove(Pond, "SWF-"),
         Pond = as.numeric(Pond))
anthro <- st_read("output/AnthroFull.gpkg")
niche <- read.csv('input/ButterflyNicheBreadth.csv')
butt <- read.csv('output/ButterflyCleanbySite.csv')

an <- left_join(niche, anthro, by = "Pond")
anp <- left_join(an, plant, by = "Pond")
ab <- inner_join(anthro, butt, by = join_by("Pond" == "SWP"))
abp <- inner_join(ab, plant, by = "Pond")

```


(\*) University of Ottawa, Department of Earth and Environmental Sciences, 150, Louis-Pasteur Private, Ottawa, Ontario, Canada, K1N 6N5\
email: [jfort073\@uottawa.ca](mailto:jfort073@uottawa.ca){.email}

This supplementary information file contains (1) variable descriptions, (2) descriptive statistics for each study site, (3) summary tables of each model. All associated code can be found at the paper's associated GitHub repository, [here](https://github.com/icrichmond/UrbanButterflies).

------------------------------------------------------------------------

## Variables

**Table S1.** Variable names, acronym (used in R code), and descriptions.

```{r}
#| echo: false
#| eval: true
#| label: variables

var <- read.csv("input/variables.csv")

knitr::kable(var)
```

------------------------------------------------------------------------

## Descriptive Statistics

**Table S2.** Descriptive statistics of butterfly abundance, species richness, and Shannon diversity, and plant species richness and % bloom for all flowering plants and native flowering plants. Variable acronyms/shortforms can be found in Table S1.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| label: descriptive-stats

plant <- read.csv("output/PlantCleanbySite.csv")
plant <- plant %>% 
  select(nspecies, nnative, avgbloom, avgnatbloom)

butt <- read.csv("output/ButterflyCleanbySite.csv")
butt <- butt %>% 
  select(SWP, abund, SpeciesRichness, Shannon) %>%
  rename(Abund = abund,
         Richness = SpeciesRichness)

df <- cbind(butt, plant)

knitr::kable(df, digits = 2)
```


------------------------------------------------------------------------

## Summary Tables

Table S3.  
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| label: urb-400

urb_ab_400 <- readRDS('large/UrbAbund_400.rds')
urb_n_sr_400 <- readRDS('large/UrbNicheSR_400.rds')
urb_sh_400 <- readRDS('large/UrbShann_400.rds')

tab_model(urb_ab_400, urb_n_sr_400, urb_sh_400, dv.labels = c("Abundance", "Species Richness", "Shannon Diversity"))

```

Table S4. 
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| label: total-plants

tot_ab <- readRDS('large/TotAbund.rds')
tot_n_sr <- readRDS('large/TotNicheSR.rds')
tot_sh <- readRDS('large/TotShann.rds')

tab_model(tot_ab, tot_n_sr, tot_sh, dv.labels = c("Abundance", "Species Richness", "Shannon Diversity"))

```

Table S5. 
```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false
#| label: native-plants

nat_ab <- readRDS('large/NatAbund.rds')
nat_n_sr <- readRDS('large/NatNicheSR.rds')
nat_sh <- readRDS('large/NatShann.rds')

tab_model(nat_ab, nat_n_sr, nat_sh, dv.labels = c("Abundance", "Species Richness", "Shannon Diversity"))

```

